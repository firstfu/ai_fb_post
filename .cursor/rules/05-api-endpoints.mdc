---
description:
globs: *
alwaysApply: false
---
# Streamlit çµ„ä»¶å’Œæ•¸æ“šæ¨¡å‹è¨­è¨ˆ

## æ•¸æ“šæ¨¡å‹

### Post æ¨¡å‹

è²¼æ–‡è³‡æ–™çš„æ ¸å¿ƒæ•¸æ“šçµæ§‹ï¼š

```python
class Post(BaseModel):
    id: int
    title: str
    content: str
    status: str = "draft"  # draft, scheduled, published, failed
    scheduled_time: Optional[str] = None
    created_time: str
    updated_time: str
    facebook_post_id: Optional[str] = None
    engagement_stats: Dict = {}
```

### ç‹€æ…‹å¸¸æ•¸

è²¼æ–‡ç‹€æ…‹çš„å®šç¾©ï¼š

- **draft**: è‰ç¨¿ç‹€æ…‹ï¼Œå°šæœªç™¼å¸ƒ
- **scheduled**: å·²æ’ç¨‹ï¼Œç­‰å¾…ç™¼å¸ƒæ™‚é–“
- **published**: å·²æˆåŠŸç™¼å¸ƒåˆ° Facebook
- **failed**: ç™¼å¸ƒéç¨‹ä¸­ç™¼ç”ŸéŒ¯èª¤

## æ ¸å¿ƒçµ„ä»¶

### PostManager é¡

è² è²¬æ‰€æœ‰è²¼æ–‡æ•¸æ“šçš„ç®¡ç†æ“ä½œï¼š

```python
class PostManager:
    def load_posts(self) -> List[Post]
    def save_posts(self, posts: List[Post]) -> None
    def create_post(self, post_data: dict) -> Post
    def update_post(self, post_id: int, post_data: dict) -> Post
    def delete_post(self, post_id: int) -> bool
    def publish_post(self, post_id: int) -> bool
```

### é é¢å‡½æ•¸

ä¸»è¦çš„é é¢æ¸²æŸ“å‡½æ•¸ï¼š

```python
def show_dashboard() -> None
def show_posts_list() -> None
def show_create_post() -> None
def show_post_detail(post_id: int) -> None
def show_edit_post(post_id: int) -> None
```

### è¼”åŠ©å‡½æ•¸

æ”¯æ´åŠŸèƒ½çš„è¼”åŠ©å‡½æ•¸ï¼š

```python
def get_status_color(status: str) -> str
def get_status_text(status: str) -> str
def init_sample_data() -> List[Post]
def search_posts(posts: List[Post], query: str) -> List[Post]
def filter_posts_by_status(posts: List[Post], status: str) -> List[Post]
```

## Streamlit çµ„ä»¶ä½¿ç”¨

### å°èˆªçµ„ä»¶

```python
# å´é‚Šæ¬„å°èˆª
with st.sidebar:
    if st.button("ğŸ  å„€è¡¨æ¿"):
        st.session_state.page = "dashboard"
    if st.button("ğŸ“ è²¼æ–‡ç®¡ç†"):
        st.session_state.page = "posts"
    if st.button("â• å‰µå»ºè²¼æ–‡"):
        st.session_state.page = "create"
```

### æ•¸æ“šå±•ç¤ºçµ„ä»¶

```python
# æŒ‡æ¨™å¡ç‰‡
col1, col2, col3, col4 = st.columns(4)
with col1:
    st.metric("ç¸½è²¼æ–‡æ•¸", total_posts)
with col2:
    st.metric("å·²ç™¼å¸ƒ", published_count)
# ...

# åœ–è¡¨å±•ç¤º
st.plotly_chart(fig, use_container_width=True)
```

### è¡¨å–®çµ„ä»¶

```python
# å‰µå»ºè²¼æ–‡è¡¨å–®
with st.form("create_post_form"):
    title = st.text_input("è²¼æ–‡æ¨™é¡Œ", max_chars=200)
    content = st.text_area("è²¼æ–‡å…§å®¹", height=200, max_chars=2000)
    status = st.selectbox("ç‹€æ…‹", ["draft", "scheduled"])

    if status == "scheduled":
        scheduled_date = st.date_input("ç™¼å¸ƒæ—¥æœŸ")
        scheduled_time = st.time_input("ç™¼å¸ƒæ™‚é–“")

    submitted = st.form_submit_button("å‰µå»ºè²¼æ–‡")
```

## æ•¸æ“šæ“ä½œæµç¨‹

### å‰µå»ºè²¼æ–‡æµç¨‹

1. ç”¨æˆ¶åœ¨è¡¨å–®ä¸­è¼¸å…¥è²¼æ–‡è³‡è¨Š
2. é»æ“Šæäº¤æŒ‰éˆ•è§¸ç™¼è¡¨å–®è™•ç†
3. é©—è­‰è¼¸å…¥æ•¸æ“šçš„æœ‰æ•ˆæ€§
4. èª¿ç”¨ PostManager.create_post() å‰µå»ºè²¼æ–‡
5. æ›´æ–°æ•¸æ“šæ–‡ä»¶ä¸¦é¡¯ç¤ºæˆåŠŸè¨Šæ¯
6. é‡æ–°è¼‰å…¥é é¢é¡¯ç¤ºæ›´æ–°å¾Œçš„æ•¸æ“š

### ç·¨è¼¯è²¼æ–‡æµç¨‹

1. å¾è²¼æ–‡åˆ—è¡¨é»æ“Šç·¨è¼¯æŒ‰éˆ•
2. è¼‰å…¥ç¾æœ‰è²¼æ–‡æ•¸æ“šåˆ°è¡¨å–®
3. ç”¨æˆ¶ä¿®æ”¹è²¼æ–‡å…§å®¹
4. æäº¤è¡¨å–®è§¸ç™¼æ›´æ–°æ“ä½œ
5. èª¿ç”¨ PostManager.update_post() æ›´æ–°è²¼æ–‡
6. ä¿å­˜æ•¸æ“šä¸¦è¿”å›è²¼æ–‡åˆ—è¡¨

### ç™¼å¸ƒè²¼æ–‡æµç¨‹

1. é»æ“Šç™¼å¸ƒæŒ‰éˆ•è§¸ç™¼ç™¼å¸ƒæ“ä½œ
2. é©—è­‰è²¼æ–‡å…§å®¹å®Œæ•´æ€§
3. èª¿ç”¨ PostManager.publish_post() åŸ·è¡Œç™¼å¸ƒ
4. æ›´æ–°è²¼æ–‡ç‹€æ…‹ç‚º "published"
5. è¨˜éŒ„ç™¼å¸ƒæ™‚é–“å’Œç›¸é—œè³‡è¨Š
6. é¡¯ç¤ºç™¼å¸ƒçµæœä¸¦æ›´æ–°ç•Œé¢
